!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("slippyslider",t):(e=e||self).slippyslider=t()}(this,function(){"use strict";return function(e){var t=this;void 0===e&&(e={});var r=e.slider;void 0===r&&(r=".slippy-slider");var i=e.track;void 0===i&&(i=".slippy-slider__track");var s=e.slides;void 0===s&&(s=".slippy-slider__slide");var n=e.center;void 0===n&&(n=!0);var o=s,l=function(e){return Array.prototype.slice.call(e)};if(this.slider=document.querySelector(r),!this.slider)return console.error("Please specify a slider target");if(this.track=this.slider.querySelector(i),!this.track)return console.error("Cannot find slippy-slider__track");if(this.slides=l(this.slider.querySelectorAll(o)),0===!this.slides.length)return console.error("Please specify a the slider slides");this.center=n,this.updateSlides=function(){return t.slides=l(t.slider.querySelectorAll(o))},console.log("%cReady to get Slippy  ðŸ˜Ž%c","color: black; font-family: sans-serif; font-weight: bold; font-style: italic; font-size: 20px; text-shadow: 1px 1px 0 white; padding: 10px 20px; background: linear-gradient(90deg, #00C9FF 0%, #92FE9D 100%); border-radius: 4px;","font-size: 20px;");var a=function(e){var r=e.getBoundingClientRect();return t.center?r.left+r.width/2:r.left},c=function(e){return t.slides.map(function(t){return t.classList.remove(e)})},d=function(e){void 0===e&&(e="active"),console.log("findSlide");var r=a(t.slider),i=t.slides.map(function(e,t){return{index:t,position:a(e),scrollOffset:a(e)-r,slide:e}});if(!isNaN(e)&&i.length>=e)return i[e];var s=l(i).sort(function(e,t){return Math.abs(e.position-r)-Math.abs(t.position-r)})[0];return"next"===e?i[s.index+1]||i[0]:"prev"===e?i[s.index-1]||i.slice(-1)[0]:s};this.moveTo=function(e,r){console.log("moveTo");var i=d(e).scrollOffset,s=(i+(t.track.getBoundingClientRect().left-t.slides[0].getBoundingClientRect().left))/t.track.clientWidth*100;t.track.style.transition="transform 0.5s cubic-bezier(0.5, 0, 0.5, 1)",t.track.style.transform="translate3d("+-1*i+"px, 0, 0)",t.track.addEventListener("transitionend",function(){t.track.style.transform="",t.track.style.transition="",t.slides.forEach(function(e){return e.style.left=-1*s+"%"})})};var f={root:this.slider,threshold:[0,.5,1],rootMargin:"100px 0px 100px 0px"},u=new IntersectionObserver(function(e,r){for(var i=0;i<e.length;i++){var s=e[i],n=s.target;s.intersectionRatio>=.49?(console.log("on-screen",n),n.classList.add("on-screen")):(console.log("removed on-screen",n),n.classList.remove("on-screen")),t.center||(c("active-slide"),d("active").slide.classList.add("active-slide"))}},f);if(this.slides.forEach(function(e){return u.observe(e)}),this.center){var p={root:this.slider,threshold:0,rootMargin:"100px -50% 100px -50%"},v=new IntersectionObserver(function(e,t){for(var r=0;r<e.length;r++){var i=e[r],s=i.target;i.isIntersecting?s.classList.add("active-slide"):s.classList.remove("active-slide")}},p);this.slides.forEach(function(e){return v.observe(e)})}var h=!1,g=0,y=0,m=null,k=function(e){console.log("startDrag"),e.stopPropagation(),h=!0,g=e.pageX,m=t.track.getBoundingClientRect().left-t.slides[0].getBoundingClientRect().left},x=function(e){h&&(y=g-e.pageX+m,t.slides.forEach(function(e){return e.style.left=""}),t.track.style.transform="translateX("+-1*y+"px)")},E=function(e){e.stopPropagation(),h&&0!==y&&(t.track.style.transform="",t.slides.forEach(function(e){return e.style.left=-1*y+"px"}),t.moveTo("active"),y=0,h=!1)};this.track.addEventListener("touchstart",k),this.track.addEventListener("touchmove",x),this.track.addEventListener("touchend",E),this.track.addEventListener("mousedown",k),this.track.addEventListener("mousemove",x),this.track.addEventListener("mouseup",E),this.track.addEventListener("mouseout",E)}});