!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("slippyslider",t):(e=e||self).slippyslider=t()}(this,function(){"use strict";return function(e){var t=this;void 0===e&&(e={});var r=e.slider;void 0===r&&(r=".slippy-slider");var i=e.track;void 0===i&&(i=".slippy-slider__track");var n=e.slides;void 0===n&&(n=".slippy-slider__slide");var s=e.center;void 0===s&&(s=!0);var o=n,l=function(e){return Array.prototype.slice.call(e)};if(this.slider=document.querySelector(r),!this.slider)return console.error("Please specify a slider target");if(this.track=this.slider.querySelector(i),!this.track)return console.error("Cannot find slippy-slider__track");if(this.slides=l(this.slider.querySelectorAll(o)),0===!this.slides.length)return console.error("Please specify a the slider slides");this.center=s,this.updateSlides=function(){return t.slides=l(t.slider.querySelectorAll(o))},console.log("%cReady to get Slippy  ðŸ˜Ž%c","color: black; font-family: sans-serif; font-weight: bold; font-style: italic; font-size: 20px; text-shadow: 1px 1px 0 white; padding: 10px 20px; background: linear-gradient(90deg, #00C9FF 0%, #92FE9D 100%); border-radius: 4px;","font-size: 20px;");var a=function(e){var r=e.getBoundingClientRect();return t.center?r.left+r.width/2:r.left},c=function(e){return t.slides.map(function(t){return t.classList.remove(e)})},d=function(e){void 0===e&&(e="active"),console.log("findSlide");var r=a(t.slider),i=t.slides.map(function(e,t){return{index:t,position:a(e),scrollOffset:a(e)-r,slide:e}});if(!isNaN(e)&&i.length>=e)return i[e];var n=l(i).sort(function(e,t){return Math.abs(e.position-r)-Math.abs(t.position-r)})[0];return"next"===e?i[n.index+1]||i[0]:"prev"===e?i[n.index-1]||i.slice(-1)[0]:n};this.easing={inOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},inOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},inOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},inOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}},this.moveTo=function(e,r){void 0===r&&(r=800),console.log("moveTo");var i=!1,n=null,s=d(e).scrollOffset,o=s+(t.track.getBoundingClientRect().left-t.slides[0].getBoundingClientRect().left),l=function(e){if(i)return t.track.style.transform="",void t.slides.forEach(function(e){return e.style.left=-1*o+"px"});e-n>=r&&(i=!0);var a=(e-n)/r,c=t.easing.inOutCubic(a),d=-1*(0+(s-0)*c);t.track.style.transform="translate3d("+d+"px, 0, 0)",requestAnimationFrame(l)};requestAnimationFrame(function(e){n=e,l(e)})};var u={root:this.slider,threshold:[0,.5,1],rootMargin:"100px 0px 100px 0px"},f=new IntersectionObserver(function(e,r){for(var i=0;i<e.length;i++){var n=e[i],s=n.target;n.intersectionRatio>=.49?(console.log("on-screen",s),s.classList.add("on-screen")):(console.log("removed on-screen",s),s.classList.remove("on-screen")),t.center||(c("active-slide"),d("active").slide.classList.add("active-slide"))}},u);if(this.slides.forEach(function(e){return f.observe(e)}),this.center){var p={root:this.slider,threshold:0,rootMargin:"100px -50% 100px -50%"},v=new IntersectionObserver(function(e,t){for(var r=0;r<e.length;r++){var i=e[r],n=i.target;i.isIntersecting?n.classList.add("active-slide"):n.classList.remove("active-slide")}},p);this.slides.forEach(function(e){return v.observe(e)})}var h=!1,g=0,m=0,y=null,x=function(e){console.log("startDrag"),e.stopPropagation(),h=!0,g=e.pageX,y=t.track.getBoundingClientRect().left-t.slides[0].getBoundingClientRect().left},k=function(e){h&&(console.log("drag"),m=g-e.pageX+y,console.log("sliderCurrentScroll --\x3e",y),console.log("dragValue --\x3e",m),t.slides.forEach(function(e){return e.style.left=""}),t.track.style.transform="translateX("+-1*m+"px)")},b=function(e){e.stopPropagation(),h&&0!==m&&(t.track.style.transform="",t.slides.forEach(function(e){return e.style.left=-1*m+"px"}),t.moveTo("active"),m=0,h=!1,console.log("endDrag"))};this.track.addEventListener("touchstart",x),this.track.addEventListener("touchmove",k),this.track.addEventListener("touchend",b),this.track.addEventListener("mousedown",x),this.track.addEventListener("mousemove",k),this.track.addEventListener("mouseup",b),this.track.addEventListener("mouseout",b)}});